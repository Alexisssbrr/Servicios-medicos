@{
    ViewData["Title"] = "Registro de Visita";
}

<div class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow-sm" style="width: 100%; max-width: 500px; border-radius: 10px;">
        <div class="card-body p-4">
            <h2 class="text-center mb-4" style="color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px;">
                Registro de Visita Médica
            </h2>

            <form>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">Matrícula</label>
                        <input type="text" class="form-control" placeholder="Ej. 2216109093" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">Nombre Completo</label>
                        <input type="text" class="form-control" placeholder="Nombre del alumno" required>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-8 mb-3">
                        <label class="form-label fw-bold">Carrera</label>
                        <select class="form-select" required>
                            <option value="">Selecciona una carrera</option>
                            <option value="1">Ingeniería en Gestión y Desarrollo de Software Multiplataforma</option>
                            <option value="2">Ingeniería en Operaciones y Procesos Industriales</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold">Fecha de Visita</label>
                        <input type="date" class="form-control" required value="@DateTime.Now.ToString("yyyy-MM-dd")">
                    </div>
                </div>

                <hr class="my-4 text-muted">

                <h5 class="mb-3 text-primary"><i class="bi bi-person-lines-fill"></i> Información del Alumno</h5>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold small">Fecha Nacimiento</label>
                        <input type="date" class="form-control" id="fechaNacimiento" onchange="calcularEdad()">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold small">Edad</label>
                        <input type="number" class="form-control" id="edad" placeholder="Años" readonly>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold small">Talla (cm)</label>
                        <input type="number" step="0.1" class="form-control" placeholder="Ej. 170">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label class="form-label fw-bold small">Peso (kg)</label>
                        <input type="number" step="0.1" class="form-control" placeholder="Ej. 70.5">
                    </div>
                </div>

                <div class="row mt-2">
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold d-block">¿Tiene Alergias?</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="radioAlergias" id="alergiaNo" value="no" checked onchange="toggleAlergias()">
                            <label class="form-check-label" for="alergiaNo">No</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="radioAlergias" id="alergiaSi" value="si" onchange="toggleAlergias()">
                            <label class="form-check-label" for="alergiaSi">Sí</label>
                        </div>

                        <div id="campoEspecificarAlergia" class="mt-2 d-none">
                            <input type="text" class="form-control form-control-sm border-danger" id="inputAlergia" placeholder="Especifique la alergia...">
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">Enfermedades Crónicas</label>
                        <input type="text" class="form-control" placeholder="Diabetes, asma, etc.">
                    </div>
                </div>

                <hr class="my-4 text-muted">

                <h5 class="mb-3 text-danger"><i class="bi bi-heart-pulse"></i> Signos Vitales</h5>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold small">Frecuencia Cardíaca (LPM)</label>
                        <input type="text" class="form-control" placeholder="Ej. 72">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold small">Frecuencia Respiratoria (RPM)</label>
                        <input type="text" class="form-control" placeholder="Ej. 16">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label class="form-label fw-bold small">Saturación (%)</label>
                        <input type="text" class="form-control" placeholder="Ej. 98">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold small">Temperatura (°C)</label>
                        <input type="number" step="0.1" class="form-control" placeholder="Ej. 36.5">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold small">Presión Arterial</label>
                        <input type="text" class="form-control" placeholder="Ej. 120/80">
                    </div>
                </div>

                <div class="mb-3 mt-3">
                    <label class="form-label fw-bold">Diagnóstico</label>
                    <textarea class="form-control" rows="4" placeholder="Describa el motivo o síntomas..." required></textarea>
                </div>

                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn btn-primary btn-lg shadow-sm" style="background-color: #3498db; border: none;">
                        Registrar Entrada
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Función para mostrar/ocultar campo de alergias
    function toggleAlergias() {
        const radioSi = document.getElementById('alergiaSi');
        const contenedor = document.getElementById('campoEspecificarAlergia');
        const input = document.getElementById('inputAlergia');

        if (radioSi.checked) {
            contenedor.classList.remove('d-none');
            input.focus();
        } else {
            contenedor.classList.add('d-none');
            input.value = "";
        }
    }

    // Función extra: Calcular edad automáticamente
    function calcularEdad() {
        const fechaNac = document.getElementById('fechaNacimiento').value;
        if (fechaNac) {
            const hoy = new Date();
            const cumpleanos = new Date(fechaNac);
            let edad = hoy.getFullYear() - cumpleanos.getFullYear();
            const m = hoy.getMonth() - cumpleanos.getMonth();
            if (m < 0 || (m === 0 && hoy.getDate() < cumpleanos.getDate())) {
                edad--;
            }
            document.getElementById('edad').value = edad;
        }
    }
</script>